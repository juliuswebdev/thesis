<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>BAMOS ADMIN FORM CHECKING</title>
  <!-- plugins:css -->
  <link rel="stylesheet" href="../../vendors/feather/feather.css">
  <link rel="stylesheet" href="../../vendors/mdi/css/materialdesignicons.min.css">
  <link rel="stylesheet" href="../../vendors/ti-icons/css/themify-icons.css">
  <link rel="stylesheet" href="../../vendors/typicons/typicons.css">
  <link rel="stylesheet" href="../../vendors/simple-line-icons/css/simple-line-icons.css">
  <link rel="stylesheet" href="../../vendors/css/vendor.bundle.base.css">
  <!-- endinject -->
  <!-- Plugin css for this page -->
  <link rel="stylesheet" href="../../vendors/select2/select2.min.css">
  <link rel="stylesheet" href="../../vendors/select2-bootstrap-theme/select2-bootstrap.min.css">
  <!-- End plugin css for this page -->
  <!-- inject:css -->
  <link rel="stylesheet" href="../../css/vertical-layout-light/style.css">
  <!-- endinject -->
  <link rel="shortcut icon" href="../../images/favicon.png" />
</head>

<body>
  <!-- partial:partials/_navbar.html -->
  <nav class="navbar default-layout col-lg-12 col-12 p-0 fixed-top d-flex align-items-top flex-row">
    <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-start">
      <div class="me-3">
        <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-bs-toggle="minimize">
          <span class="icon-menu"></span>
        </button>
      </div>
      <div>
        <a class="navbar-brand brand-logo" href="bamos-dashb-welcome-page.html">
          <img src="images/logo-2.png" alt="logo" />
        </a>
        <a class="navbar-brand brand-logo-mini" href="bamos-dashb-welcome-page.html">
          <img src="images/logo-2.png" alt="logo" />
        </a>
      </div>
    </div>
    <div class="navbar-menu-wrapper d-flex align-items-top"> 
      <ul class="navbar-nav">
        <li class="nav-item font-weight-semibold d-none d-lg-block ms-0">
          <h1 class="welcome-text">Good Day, <span class="fw-bold">ADMIN</span></h1>
        </li>
      </ul>
      <ul class="navbar-nav ms-auto">
        <li class="nav-item d-none d-lg-block">
          <div id="datepicker-popup" class="input-group date datepicker navbar-date-picker">
            <span class="input-group-addon input-group-prepend border-right">
              <span class="icon-calendar input-group-text calendar-icon"></span>
            </span>
            <input type="text" class="form-control">
          </div>
        </li>
        
        <li class="nav-item dropdown">
          <a class="nav-link count-indicator" id="countDropdown" href="#" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="icon-bell"></i>
            <span class="count"></span>
          </a>
          <div class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list pb-0" aria-labelledby="notificationDropdown" id="notification-list">
            
            
          </div>
        </li>

        <li class="nav-item dropdown d-none d-lg-block user-dropdown">
          <a class="nav-link" id="UserDropdown" href="#" data-bs-toggle="dropdown" aria-expanded="false">
            Admin </a>
          <div class="dropdown-menu dropdown-menu-right navbar-dropdown" aria-labelledby="UserDropdown">
            <div class="dropdown-header text-center">
              <p class="mb-1 mt-3 font-weight-semibold" id="userAdmin"></p>
              <p class="fw-light text-muted mb-0" id="userAdminEmail"></p>
            </div>

            <a class="dropdown-item"  id="sign-out"><i class="dropdown-item-icon mdi mdi-power text-primary me-2"></i>Sign Out</a>
          </div>
        </li>
      </ul>
      <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button" data-bs-toggle="offcanvas">
        <span class="mdi mdi-menu"></span>
      </button>
    </div>
  </nav>
    <!-- partial -->
    <div class="container-fluid page-body-wrapper">
      <!-- partial:../../partials/_settings-panel.html -->
     
      <!-- partial -->
      <!-- partial:../../partials/_sidebar.html -->
      <nav class="sidebar sidebar-offcanvas" id="sidebar">
        <ul class="nav">
          <li class="nav-item">
            <a class="nav-link" href="../../bamos-dashb-welcome-page.html">
              <i class="mdi mdi-grid-large menu-icon"></i>
              <span class="menu-title">Dashboard</span>
            </a>
          </li>
          <li class="nav-item nav-category">Forms and Datas</li>
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="collapse" href="#form-elements" aria-expanded="false" aria-controls="form-elements">
              <i class="menu-icon mdi mdi-card-text-outline"></i>
              <span class="menu-title">Forms</span>
              <i class="menu-arrow"></i>
            </a>
            <div class="collapse" id="form-elements">
              <ul class="nav flex-column sub-menu">
                <li class="nav-item"><a class="nav-link" href="../../pages/forms/bamos-form-checking.html">For checking</a></li>
              </ul>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="collapse" href="#charts" aria-expanded="false" aria-controls="charts">
              <i class="menu-icon mdi mdi-chart-line"></i>
              <span class="menu-title">Charts</span>
              <i class="menu-arrow"></i>
            </a>
            <div class="collapse" id="charts">
              <ul class="nav flex-column sub-menu">
                <li class="nav-item"> <a class="nav-link" href="../../pages/charts/bamos-charts.html">See all charts</a></li>
              </ul>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="collapse" href="#tables" aria-expanded="false" aria-controls="tables">
              <i class="menu-icon mdi mdi-table"></i>
              <span class="menu-title">Tables</span>
              <i class="menu-arrow"></i>
            </a>
            <div class="collapse" id="tables">
              <ul class="nav flex-column sub-menu">
                <li class="nav-item"> <a class="nav-link" href="../../pages/tables/bamos-users.html">See all tables</a></li>
              </ul>
            </div>
          </li>
        </ul>
      </nav>
      <!-- partial -->
      <div class="main-panel">        
        <div class="content-wrapper">
          <div class="card card-registration card-registration-2" style="border-radius: 15px;">
            <div class="card-body p-0">
              <div class="row g-0">
                <div class="col-lg-6">
                  <div class="p-5">
                    <h4 class="card-title">Your Information</h4>

                    <div class="mb-4 pb-2">
                      <select class="select form-control"  style="height: 3.5em;" id="resStat">
                        <option hidden="">Status</option>
                        <option value="Current Resident">Current Resident</option>
                        <option value="Previous Resident">Previous Resident</option>
                        <option value="Deceased Resident">Deceased Resident</option>
                      </select>
                    </div>

                    <div class="row">
                      <div class="col-md-6 mb-4 pb-2">
                        <div class="form-outline">
                          <input type="text" name="lastname" id="lastname" class="form-control form-control-lg">
                          <label class="form-label" for="lastname">Last name</label>
                        </div>
                      </div>
                      <div class="col-md-6 mb-4 pb-2">
                        <div class="form-outline">
                          <input type="text" id="middlename" class="form-control form-control-lg">
                          <label class="form-label" for="middlename">Middle name</label>
                        </div>
                      </div>
                      <div class="col-md-6 mb-4 pb-2">
                        <div class="form-outline">
                          <input type="text" name="firstname" id="firstname" class="form-control form-control-lg">
                          <label class="form-label" for="firstname">First name</label>
                        </div>
                      </div>
                      <div class="col-md-6 mb-4 pb-2">
                        <div class="form-outline">
                          <input type="date" id="birthdate" class="form-control form-control-lg">
                          <label class="form-label" for="birthdate">Date of Birth</label>
                        </div>
                      </div>
                    </div>

                    <div class="mb-4 pb-2">
                      <select class="select  form-control" style="height: 3.5em;" id="civilstatus">
                        <option hidden="">Civil Status</option>
                        <option value="Single">Single</option>
                        <option value="Married">Married</option>
                        <option value="Widowed">Widowed</option>
                      </select>
                    </div>

                    <div class="mb-4 pb-2">
                      <div class="form-outline">
                        <input type="text" name="username" id="username" class="form-control form-control-lg">
                        <label class="form-label" for="username">Enter new username</label>
                      </div>
                    </div> 
                    <div class="mb-4 pb-2">
                      <div class="form-outline">
                        <input type="password" name="pass" id="pass" class="form-control form-control-lg">
                        <label class="form-label" for="pass">Enter new password</label>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-lg-6 bg-indigo">
                  <div class="p-5">
                    <h4 class="card-title">Additional Info</h4>

                    <div class="mb-4 pb-2">
                      <div class="form-outline form-white">
                        <input type="text" id="address" class="form-control form-control-lg">
                        <label class="form-label" for="address">Address</label>
                      </div>
                    </div>

                    <div class="mb-4 pb-2">
                      <div class="form-outline form-white">
                        <input type="text" id="housenum" class="form-control form-control-lg">
                        <label class="form-label" for="housenum">Street Name + House number</label>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-5 mb-4 pb-2">

                        <div class="form-outline form-white">
                          <input type="text" id="sitio" class="form-control form-control-lg">
                          <label class="form-label" for="sitio">Sitio</label>
                        </div>

                      </div>
                      <div class="col-md-7 mb-4 pb-2">

                        <div class="form-outline form-white">
                          <input type="text" id="purok" class="form-control form-control-lg">
                          <label class="form-label" for="purok">Purok</label>
                        </div>

                      </div>
                    </div>

                    <div class="mb-4 pb-2">
                      <div class="form-outline form-white">
                        <input type="text" id="email" class="form-control form-control-lg">
                        <label class="form-label" for="email">E-mail (optional)</label>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-5 mb-4 pb-2">

                        <div class="form-outline form-white">
                          <input type="text" id="phonenum" class="form-control form-control-lg">
                          <label class="form-label" for="phonenum">Phone number</label>
                        </div>

                      </div>
                      <div class="col-md-7 mb-4 pb-2">

                        <div class="form-outline form-white">
                          <input type="text" id="enumber" class="form-control form-control-lg">
                          <label class="form-label" for="enumber">Emergency phone number</label>
                        </div>

                      </div>
                    </div>

                    <div class="form-check d-flex justify-content-start mb-4 pb-3">
                      <input class="form-check-input" style="margin-left: 0;" type="checkbox" value="" id="termscheck">
                      <label class="form-check-label" for="termscheck">
                        I do accept the <a href="terms-conditions.html"><u>Terms and
                            Conditions</u></a> of your
                        site.
                      </label>
                    </div>
                    <button href="" id="reg" type="submit" class="btn btn-primary" onclick="add()">Register</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- content-wrapper ends -->
        <!-- partial:../../partials/_footer.html -->
        <footer class="footer">
          <div class="d-sm-flex justify-content-center justify-content-sm-between">
            <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">BAMOS Â© 2023. All rights reserved.</span>
          </div>
        </footer>
        <!-- partial -->
      </div>
      <!-- main-panel ends -->
    </div>
    <!-- page-body-wrapper ends -->
  </div>
  <!-- container-scroller -->
  <!-- plugins:js -->
  <script src="../../vendors/js/vendor.bundle.base.js"></script>
  <!-- endinject -->
  <!-- Plugin js for this page -->
  <script src="../../vendors/typeahead.js/typeahead.bundle.min.js"></script>
  <script src="../../vendors/select2/select2.min.js"></script>
  <script src="../../vendors/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>

  <script src="../../vendors/chart.js/Chart.min.js"></script>
  <script src="../../vendors/progressbar.js/progressbar.min.js"></script>
  <!-- End plugin js for this page -->
  <!-- inject:js -->
  <script src="../../js/off-canvas.js"></script>
  <script src="../../js/hoverable-collapse.js"></script>
  <script src="../../js/template.js"></script>
  <script src="../../js/settings.js"></script>
  <script src="../../js/todolist.js"></script>
  <!-- endinject -->
  <!-- Custom js for this page-->
  <script src="../../js/file-upload.js"></script>
  <script src="../../js/typeahead.js"></script>
  <script src="../../js/select2.js"></script>
  <!-- End custom js for this page-->

    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="../../js/off-canvas.js"></script>
    <script src="../../js/hoverable-collapse.js"></script>
    <script src="../../js/template.js"></script>
    <script src="../../js/settings.js"></script>
    <script src="../../js/todolist.js"></script>
    <!-- endinject -->
    <!-- Custom js for this page-->
    <script src="../../js/jquery.cookie.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../../js/dashboard.js"></script>
    <script src="../../js/Chart.roundedBarCharts.js"></script>
    <!-- End custom js for this page-->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script type="text/javascript">
  
      // Import the Supabase client
  
      // Replace 'YOUR_SUPABASE_URL' and 'YOUR_SUPABASE_KEY' with your Supabase project URL and API key
      const supabaseUrl = 'https://hzyiqzmdkocpumguttzb.supabase.co';
      const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh6eWlxem1ka29jcHVtZ3V0dHpiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDA1Mzc5OTMsImV4cCI6MjAxNjExMzk5M30.-JNHzAkpBh_EN99ZiYGbu1q4ZsRSE3WapgBRMPrkiZs';
  
      // Create a Supabase client
      const database = supabase.createClient(supabaseUrl, supabaseKey);
  
      // Function to check the connection status and show an alert
      async function checkConnection() {
        try {
          // Try to make a request to Supabase to check the connection
          const { data, error } = await database.from('testing').select();
  
          // If there's an error, log it
          if (error) {
            console.error('Error connection! Please try again.', error.message);
          } else {
            // If successful, show an alert
            alert('Connection secured!');
          }
        } catch (error) {
          console.error('Error:', error.message);
        }
      }
  
      // Call the checkConnection function
      checkConnection();
  
      async function add() {
  
        let username = document.getElementById("username").value;
        let password = document.getElementById("pass").value;
        let lastname = document.getElementById("lastname").value;
        let firstname = document.getElementById("firstname").value;
        let middlename = document.getElementById("middlename").value;
        let birthday = document.getElementById("birthdate").value;
        let sitio = document.getElementById("sitio").value;
        let purok = document.getElementById("purok").value;
        let email = document.getElementById("email").value;
        let phoneNum = document.getElementById("phonenum").value;
        let emerNum = document.getElementById("enumber").value;
  
  
        var res = document.getElementById("resStat");
        var resSelectedIndex = res.selectedIndex;
        var resOptions = res.options;
        var resStatus = resOptions[resSelectedIndex].value;
  
        var civil = document.getElementById("civilstatus");
        var civilSelectedIndex = civil.selectedIndex;
        var civilOptions = civil.options;
        var civilStatus = civilOptions[civilSelectedIndex].value;
  
        let { data, error } = await database
          .from('testing')
          .insert([
            {
              username: username,
              password: password,
              lastname: lastname,
              firstname: firstname,
              middlename: middlename,
              birthDate: birthday,
              sitio: sitio,
              purok: purok,
              email: email,
              phoneNum: phoneNum,
              emergencyNum: emerNum,
              residentStatus: resStatus,
              civilStatus: civilStatus,
              role: 2,
            },
        ]).select('*');
    
        if(data?.length > 0) {
        // InsertLog 
          const { xx, error } = await database
          .from('audit')
          .insert([
            {
              user_id : data[0].id,
              description : data[0].username + " is registered!",
              page : 'registration',
            },
          ]);
        }
        alert('Successfully Registered!');
      }
    </script>
</body>

</html>
